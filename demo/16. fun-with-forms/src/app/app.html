@if(submittedSuccessfully()) {
<div class="success-box">Form was submitted successfully!</div>
}
<div class="form">
  <h3>Dinner Review Form</h3>
  <app-field label="Username">
    <input
      type="text"
      [field]="reviewForm.username"      
    />
    @for(err of reviewForm.username().errors(); track err.kind) {
    <div class="error">{{ err.message }}</div>
    }
  </app-field>
  <app-field label="Role">
    <select
      [field]="reviewForm.role"
    >
      <option value="user">User</option>
      <option value="author">Author</option>
      <option value="chef">Chef</option>
    </select>
    @for(err of reviewForm.role().errors(); track err.kind) {
    <div class="error">{{ err.message }}</div>
    }
  </app-field>
  <app-field label="Email"> 
    <input
      type="email"
      [field]="reviewForm.email"
    />
    @for(err of reviewForm.email().errors(); track err.kind) {
    <div class="error">{{ err.message }}</div>
    }
  </app-field>
  <app-field label="Description">
    <textarea
      [field]="reviewForm.description"
    ></textarea>
    @for(err of reviewForm.description().errors(); track err.kind) {
    <div class="error">{{ err.message }}</div>
    }
  </app-field>

  @for(rev of reviewForm.reviews; track $index) {
  <div class="sub-form">
    <button (click)="removeItem($index)">Remove</button>
    <app-field label="Aspect">
      <input
        type="text"
        [field]="rev.aspect"
      />
      @for(err of rev.aspect().errors(); track err.kind) {
      <div class="error">{{ err.message }}</div>
      }
    </app-field>
    <app-field label="Rating">
      <input
        type="number"
        [field]="rev.rating"
      />
      @for(err of rev.rating().errors(); track err.kind) {
      <div class="error">{{ err.message }}</div>
      }
    </app-field>
    <app-field label="Recommendation">
      <select
        [field]="rev.recommendation"
      >
        <option value="no-opinion">No Opinion</option>
        <option value="recommend">Would Recommend</option>
        <option value="not-recommend">Would Not Recommend</option>
      </select>
      @for(err of rev.recommendation().errors(); track err.kind) {
      <div class="error">{{ err.message }}</div>
      }
    </app-field>
  </div>

  }

  <button (click)="addReviewItem()">Add Review</button>

  @if(reviewForm().submitting()) {
  <div>Please wait...</div>
  }

  <button (click)="onSubmit()">Submit</button>
</div>

<div class="model">
  <h3>Model Value</h3>
  <pre><code>{{ model() | json }}</code></pre>
</div>
